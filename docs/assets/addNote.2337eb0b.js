import{_ as V,d as D,m as F,a as w,r as d,v as g,G as E,b as n,o as I,c as $,e as s,g as z,f as o,t as H,h as u,B as T,I as M,l as S,D as j,J as q,A as b,s as h}from"./index.45a74e34.js";const A={class:"add-note"},J={class:"header-title"},O=D({__name:"addNote",setup(U){const{proxy:c}=F(),x=w(),r=d(!1),t=g({title:"",detail:""}),p=d(null),B=g({detail:[{message:"\u8BF7\u8F93\u5165\u5907\u6CE8"}]}),m=d({}),f=d(400);E(()=>{f.value=window.innerHeight-320}),c.$route.path==="/schedule/editNote"&&(r.value=!0,m.value=JSON.parse(sessionStorage.getItem("noteEditInfo")),t.title=m.value.title,t.detail=m.value.detail);function C(){p.value.validate().then(({valid:v,errors:e})=>{if(v){let a=r.value?j("note",c.$route.query.objectId):q("note");if(a.set("title",t.title),a.set("detail",t.detail),!r.value){const _=["green","blue","pink","purple","orange"][Math.floor(Math.random()*5)];a.set("bgColor",_)}b.loading("loading",{cover:!0,duration:0}),a.save().then(l=>{b.hide(),h.success("\u4FDD\u5B58\u6210\u529F"),c.$router.go(-1)}).catch(l=>{h.danger(l)})}else console.log(e)})}return(v,e)=>{const a=n("nut-icon"),l=n("nut-form-item"),_=n("nut-textarea"),y=n("nut-button"),k=n("nut-cell"),N=n("nut-form");return I(),$("div",A,[s("header",null,[s("div",{class:"btn-back",onClick:e[0]||(e[0]=i=>z(x).go(-1))},[o(a,{name:"rect-left",size:"1.1rem"})]),s("div",J,H(r.value?"\u7F16\u8F91\u7B14\u8BB0":"\u65B0\u589E\u7B14\u8BB0"),1)]),s("main",null,[o(N,{modelValue:t,rules:B,ref_key:"ruleForm",ref:p},{default:u(()=>[o(l,{prop:"title",required:""},{default:u(()=>[T(s("input",{class:"nut-input-text","onUpdate:modelValue":e[1]||(e[1]=i=>t.title=i),placeholder:"\u6807\u9898",type:"text"},null,512),[[M,t.title]])]),_:1}),o(l,{prop:"detail"},{default:u(()=>[e[3]||(e[3]=s("div",{class:"label"},null,-1)),o(_,{modelValue:t.detail,"onUpdate:modelValue":e[2]||(e[2]=i=>t.detail=i),placeholder:"\u5185\u5BB9\u2026\u2026",rows:"10",autosize:{maxHeight:f.value,minHeight:100}},null,8,["modelValue","autosize"])]),_:1}),o(k,{class:"submit-container"},{default:u(()=>[o(y,{type:"primary",disabled:!t.title&&!t.detail,block:"",color:"rgb(106, 116, 205)",size:"large",onClick:C},{default:u(()=>[...e[4]||(e[4]=[S("\u63D0\u4EA4",-1)])]),_:1},8,["disabled"])]),_:1})]),_:1},8,["modelValue","rules"])])])}}});var R=V(O,[["__scopeId","data-v-36190f4c"]]);export{R as default};
