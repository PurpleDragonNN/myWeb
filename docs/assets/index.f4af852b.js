import{d as D,r as f,o as R,c as S,a as u,u as m,n as U,p as q,b as W,e as L}from"./index.54a04528.js";var y="./assets/bg.fc35cbae.png",A="./assets/head.87d82a8c.png",H="./assets/wx-share.a576657c.png";var z=(i,b)=>{const d=i.__vccOpts||i;for(const[v,F]of b)d[v]=F;return d};const E=i=>(q("data-v-b358b27e"),i=i(),W(),i),M={class:"input-block"},P=E(()=>u("input",{type:"file",class:"upload-btn"},null,-1)),V=["value"],N={class:"show"},O=["href"],$=E(()=>u("p",null,"\u8F6C\u6362\u540E\uFF08\u70B9\u51FB\u4E0B\u8F7D\uFF09:",-1)),j=["src"],G=E(()=>u("p",null,"\u8F6C\u6362\u524D:",-1)),J=["src"],K=D({setup(i){let b=f(k("head.png")),d=f(""),v=f(""),F=window.innerHeight>window.innerWidth,C=f(50),I=f(null),p=f(null);function k(r){return new URL({"../../assets/radius/img/bg.png":y,"../../assets/radius/img/head.png":A,"../../assets/radius/img/wx-share.png":H}[`../../assets/radius/img/${r}`],self.location).href}R(()=>{setTimeout(()=>{let a=T({img:p.value,type:1,radius:C.value*(p.value.naturalWidth/750)});d.value=a,v.value=a},300);let r=document.querySelector(".upload-btn");r.onchange=function(a){let w=a.target.files[0],c=new FileReader;c.readAsDataURL(w),c.addEventListener("load",()=>{console.log(c.result),b.value=c.result,setTimeout(()=>{let e=T({img:p.value,type:1,radius:C.value*(p.value.naturalWidth/750)});d.value=e,v.value=e},500)})}});function T(r){console.log(r);var a=r.img,w=r.type||0,c=r.radius||0,e,_,n;if(w?e={width:a.naturalWidth,height:a.naturalHeight}:e={width:a.width,height:a.height},_=document.createElement("canvas"),!_.getContext)return console.log("\u60A8\u7684\u6D4F\u89C8\u5668\u7248\u672C\u8FC7\u4F4E\uFF0C\u6682\u4E0D\u652F\u6301\u3002"),!1;_.width=e.width,_.height=e.height,n=_.getContext("2d"),n.clearRect(0,0,e.width,e.height),n.save(),n.beginPath(),B(n,0,0,e.width,e.height,c),n.clip(),w?n.drawImage(a,0,0,e.width,e.height,0,0,e.width,e.height):n.drawImage(a,0,0,a.naturalWidth,a.naturalHeight,0,0,e.width,e.height),n.restore();function B(s,t,l,g,h,o){s.strokeStyle="#fff",s.beginPath(),s.moveTo(t,l+o),s.lineTo(t,l+h-o),s.quadraticCurveTo(t,l+h,t+o,l+h),s.lineTo(t+g-o,l+h),s.quadraticCurveTo(t+g,l+h,t+g,l+h-o),s.lineTo(t+g,l+o),s.quadraticCurveTo(t+g,l,t+g-o,l),s.lineTo(t+o,l),s.quadraticCurveTo(t,l,t,l+o),s.stroke()}return _.toDataURL("image/png")}return(r,a)=>(L(),S("div",{class:U(["container",{mobile:m(F)}])},[u("div",M,[P,u("input",{type:"number",value:m(C),placeholder:"\u8BF7\u8F93\u5165\u5706\u89D2\u77E9\u5F62\u7684\u534A\u5F84",class:"radius"},null,8,V)]),u("div",N,[u("a",{href:m(v),download:"\u56FE\u7247",class:"download-btn"},[$,u("img",{ref_key:"afterImgEl",ref:I,src:m(d),alt:"",class:"after-transform"},null,8,j)],8,O),u("div",null,[G,u("img",{ref_key:"beforeImgEl",ref:p,src:m(b),alt:"",class:"before-transform"},null,8,J)])])],2))}});var X=z(K,[["__scopeId","data-v-b358b27e"]]);export{X as default};
