import{d as k,r as i,o as q,c as B,a as o,u as g,n as D,p as y,b as R,e as U}from"./index.5137bc5d.js";var W=(d,p)=>{const c=d.__vccOpts||d;for(const[m,F]of p)c[m]=F;return c};const C=d=>(y("data-v-16b56fc1"),d=d(),R(),d),A={class:"input-block"},H=C(()=>o("input",{type:"file",class:"upload-btn"},null,-1)),L=["value"],z={class:"show"},M=["href"],P=C(()=>o("p",null,"\u8F6C\u6362\u540E\uFF08\u70B9\u51FB\u4E0B\u8F7D\uFF09:",-1)),V=["src"],N=C(()=>o("p",null,"\u8F6C\u6362\u524D:",-1)),O=["src"],j=k({setup(d){let p=i(""),c=i(""),m=i(""),F=window.innerHeight>window.innerWidth,w=i(50),I=i(null),T=i(null);p=i("src/assets/radius/img/wx-share.png"),c=i(""),q(()=>{setTimeout(()=>{let t=E({img:document.querySelector(".before-transform"),type:1,radius:w.value*(T.value.naturalWidth/750)});c.value=t,m.value=t},300);let f=document.querySelector(".upload-btn");f.onchange=function(t){let b=t.target.files[0],v=new FileReader;v.readAsDataURL(b),v.addEventListener("load",()=>{document.querySelector(".before-transform").setAttribute("src",v.result),setTimeout(()=>{let u=E({img:document.querySelector(".before-transform"),type:1,radius:w.value*(T.value.naturalWidth/750)});c.value=u,m.value=u},500)})}});function E(f){console.log(f);var t=f.img,b=f.type||0,v=f.radius||0,e,u,n;if(b?e={width:t.naturalWidth,height:t.naturalHeight}:e={width:t.width,height:t.height},u=document.createElement("canvas"),!u.getContext)return console.log("\u60A8\u7684\u6D4F\u89C8\u5668\u7248\u672C\u8FC7\u4F4E\uFF0C\u6682\u4E0D\u652F\u6301\u3002"),!1;u.width=e.width,u.height=e.height,n=u.getContext("2d"),n.clearRect(0,0,e.width,e.height),n.save(),n.beginPath(),S(n,0,0,e.width,e.height,v),n.clip(),b?n.drawImage(t,0,0,e.width,e.height,0,0,e.width,e.height):n.drawImage(t,0,0,t.naturalWidth,t.naturalHeight,0,0,e.width,e.height),n.restore();function S(l,a,r,_,h,s){l.strokeStyle="#fff",l.beginPath(),l.moveTo(a,r+s),l.lineTo(a,r+h-s),l.quadraticCurveTo(a,r+h,a+s,r+h),l.lineTo(a+_-s,r+h),l.quadraticCurveTo(a+_,r+h,a+_,r+h-s),l.lineTo(a+_,r+s),l.quadraticCurveTo(a+_,r,a+_-s,r),l.lineTo(a+s,r),l.quadraticCurveTo(a,r,a,r+s),l.stroke()}return u.toDataURL("image/png")}return(f,t)=>(U(),B("div",{class:D(["container",{mobile:g(F)}])},[o("div",A,[H,o("input",{type:"number",value:g(w),placeholder:"\u8BF7\u8F93\u5165\u5706\u89D2\u77E9\u5F62\u7684\u534A\u5F84",class:"radius"},null,8,L)]),o("div",z,[o("a",{href:g(m),download:"\u56FE\u7247",class:"download-btn"},[P,o("img",{ref_key:"afterImgEl",ref:I,src:g(c),alt:"",class:"after-transform"},null,8,V)],8,M),o("div",null,[N,o("img",{ref_key:"beforeImgEl",ref:T,src:g(p),alt:"",class:"before-transform"},null,8,O)])])],2))}});var J=W(j,[["__scopeId","data-v-16b56fc1"]]);export{J as default};
