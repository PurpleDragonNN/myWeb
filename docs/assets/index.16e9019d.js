import{_ as W,d as L,r as s,a as w,c as E,b,u as i,i as N,e as m,t as A,f as D,p as H,g as M,o as T}from"./index.9b8f9517.js";const P=g=>(H("data-v-680fbef9"),g=g(),M(),g),z={class:"container"},j={class:"show"},y=["href"],G=["src"],J={key:1},K=P(()=>m("p",null,"\u8F6C\u6362\u524D:",-1)),O=["src"],Q=L({setup(g){let h=s(""),v=s(""),I=s(""),B=s(window.navigator.userAgent.toLowerCase().match(/MicroMessenger/i)=="micromessenger"),_=s(50),k=s([]),V=s(null),F=s(null),S=s(null);function R({fileItem:d}){k.value[0].status="success",h.value=d.url,setTimeout(()=>{let t=U({img:F.value,type:1,radius:_.value*(F.value.naturalWidth/750)});v.value=t,I.value=t},500)}function U(d){let t=d.img,p=d.type||0,C=d.radius||0,e,u,r;if(p?e={width:t.naturalWidth,height:t.naturalHeight}:e={width:t.width,height:t.height},u=document.createElement("canvas"),!u.getContext)return console.log("\u60A8\u7684\u6D4F\u89C8\u5668\u7248\u672C\u8FC7\u4F4E\uFF0C\u6682\u4E0D\u652F\u6301\u3002"),!1;u.width=e.width,u.height=e.height,r=u.getContext("2d"),r.clearRect(0,0,e.width,e.height),r.save(),r.beginPath(),q(r,0,0,e.width,e.height,C),r.clip(),p?r.drawImage(t,0,0,e.width,e.height,0,0,e.width,e.height):r.drawImage(t,0,0,t.naturalWidth,t.naturalHeight,0,0,e.width,e.height),r.restore();function q(o,a,l,c,f,n){o.strokeStyle="#fff",o.beginPath(),o.moveTo(a,l+n),o.lineTo(a,l+f-n),o.quadraticCurveTo(a,l+f,a+n,l+f),o.lineTo(a+c-n,l+f),o.quadraticCurveTo(a+c,l+f,a+c,l+f-n),o.lineTo(a+c,l+n),o.quadraticCurveTo(a+c,l,a+c-n,l),o.lineTo(a+n,l),o.quadraticCurveTo(a,l,a,l+n),o.stroke()}return u.toDataURL("image/png")}return(d,t)=>{const p=w("nut-uploader"),C=w("nut-range"),e=w("nut-divider");return T(),E("div",z,[b(p,{onFailure:R,"file-list":i(k),ref_key:"uploaderEl",ref:S,class:"upload-btn"},null,8,["file-list"]),b(C,{modelValue:i(_),"onUpdate:modelValue":t[0]||(t[0]=u=>N(_)?_.value=u:_=u)},null,8,["modelValue"]),b(e),m("div",j,[i(v)?(T(),E("a",{key:0,href:i(I),download:"\u56FE\u7247",class:"download-btn"},[m("p",null,"\u8F6C\u6362\u540E\uFF08"+A(i(B)?"\u957F\u6309\u56FE\u7247\u4FDD\u5B58":"\u70B9\u51FB\u4E0B\u8F7D")+"\uFF09:",1),m("img",{ref_key:"afterImgEl",ref:V,src:i(v),alt:"",class:"after-transform"},null,8,G)],8,y)):D("",!0),i(h)?(T(),E("div",J,[K,m("img",{ref_key:"beforeImgEl",ref:F,src:i(h),alt:"",class:"before-transform"},null,8,O)])):D("",!0)])])}}});var Y=W(Q,[["__scopeId","data-v-680fbef9"]]);export{Y as default};
