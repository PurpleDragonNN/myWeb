import{_ as L}from"./plugin-vue_export-helper.21dcd24c.js";import{d as N,r,a as m,o as T,c as I,b as p,w as B,u as i,i as z,e as h,t as A,f as V,p as H,g as M}from"./index.fa06fd76.js";const P=g=>(H("data-v-495889f3"),g=g(),M(),g),j={class:"container"},y={class:"show"},G=["href"],J=["src"],K={key:1},O=P(()=>h("p",null,"\u8F6C\u6362\u524D:",-1)),Q=["src"],X=N({setup(g){let w=r(""),C=r(""),k=r(""),S=r(window.navigator.userAgent.toLowerCase().match(/MicroMessenger/i)=="micromessenger"),f=r(50),D=r([]),R=r(null),E=r(null),U=r(null);function q({fileItem:d}){D.value[0].status="success",w.value=d.url,setTimeout(()=>{let t=W({img:E.value,type:1,radius:f.value*(E.value.naturalWidth/750)});C.value=t,k.value=t},500)}function W(d){let t=d.img,v=d.type||0,b=d.radius||0,e,s,a;if(v?e={width:t.naturalWidth,height:t.naturalHeight}:e={width:t.width,height:t.height},s=document.createElement("canvas"),!s.getContext)return console.log("\u60A8\u7684\u6D4F\u89C8\u5668\u7248\u672C\u8FC7\u4F4E\uFF0C\u6682\u4E0D\u652F\u6301\u3002"),!1;s.width=e.width,s.height=e.height,a=s.getContext("2d"),a.clearRect(0,0,e.width,e.height),a.save(),a.beginPath(),F(a,0,0,e.width,e.height,b),a.clip(),v?a.drawImage(t,0,0,e.width,e.height,0,0,e.width,e.height):a.drawImage(t,0,0,t.naturalWidth,t.naturalHeight,0,0,e.width,e.height),a.restore();function F(l,o,u,c,_,n){l.strokeStyle="#fff",l.beginPath(),l.moveTo(o,u+n),l.lineTo(o,u+_-n),l.quadraticCurveTo(o,u+_,o+n,u+_),l.lineTo(o+c-n,u+_),l.quadraticCurveTo(o+c,u+_,o+c,u+_-n),l.lineTo(o+c,u+n),l.quadraticCurveTo(o+c,u,o+c-n,u),l.lineTo(o+n,u),l.quadraticCurveTo(o,u,o,u+n),l.stroke()}return s.toDataURL("image/png")}return(d,t)=>{const v=m("nut-uploader"),b=m("nut-col"),e=m("nut-inputnumber"),s=m("nut-row"),a=m("nut-divider");return T(),I("div",j,[p(s,null,{default:B(()=>[p(b,{span:12},{default:B(()=>[p(v,{onFailure:q,"file-list":i(D),ref_key:"uploaderEl",ref:U,class:"upload-btn"},null,8,["file-list"])]),_:1}),p(e,{modelValue:i(f),"onUpdate:modelValue":t[0]||(t[0]=F=>z(f)?f.value=F:f=F),"button-size":"30","input-width":"50"},null,8,["modelValue"])]),_:1}),p(a),h("div",y,[i(C)?(T(),I("a",{key:0,href:i(k),download:"\u56FE\u7247",class:"download-btn"},[h("p",null,"\u8F6C\u6362\u540E\uFF08"+A(i(S)?"\u957F\u6309\u56FE\u7247\u4FDD\u5B58":"\u70B9\u51FB\u4E0B\u8F7D")+"\uFF09:",1),h("img",{ref_key:"afterImgEl",ref:R,src:i(C),alt:"",class:"after-transform"},null,8,J)],8,G)):V("",!0),i(w)?(T(),I("div",K,[O,h("img",{ref_key:"beforeImgEl",ref:E,src:i(w),alt:"",class:"before-transform"},null,8,Q)])):V("",!0)])])}}});var $=L(X,[["__scopeId","data-v-495889f3"]]);export{$ as default};
