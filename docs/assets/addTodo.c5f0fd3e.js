import{_ as U,d as j,s as H,a as q,r as m,x as D,b as d,o as z,c as O,e as s,g as a,f as n,t as x,h as c,B as h,H as E,p as A,m as J,l as R,D as W,I as G,T as K,N as $}from"./index.e36c1f45.js";import{a as g}from"./dayjs.min.2003846a.js";const r=_=>(A("data-v-4f0ca834"),_=_(),J(),_),L={class:"add-todo"},P={class:"header-title"},Q=r(()=>s("div",{class:"label"},"\u6807\u9898",-1)),X=r(()=>s("div",{class:"label"},"\u5907\u6CE8",-1)),Z=r(()=>s("div",{class:"label"},"\u65E5\u671F",-1)),ee={class:"label"},te=r(()=>s("i",{class:"iconfont icon-rili"},null,-1)),se=r(()=>s("div",{class:"label"},"\u65F6\u95F4",-1)),oe={class:"label"},le=r(()=>s("i",{class:"iconfont icon-shijian"},null,-1)),ae=R("\u63D0\u4EA4"),ue=j({setup(_){const{proxy:v}=H(),y=q(),p=m(!1),t=D({title:"",desc:"",date:g().format("YYYY-MM-DD"),time:""}),C=m(null),k=D({desc:[{message:"\u8BF7\u8F93\u5165\u5907\u6CE8"}]}),f=m(!1),b=m(!1),F=m(new Date(g().format("YYYY-MM-DD HH:mm:00")));if(v.$route.path==="/schedule/editTodo"){p.value=!0;const o=JSON.parse(sessionStorage.getItem("todoEditInfo"));console.log(o),t.title=o.title,t.desc=o.desc,t.date=o.dateTime.split(" ")[0],t.time=o.dateTime.split(" ")[1]||""}function T(){C.value.validate().then(({valid:o,errors:e})=>{if(o){console.log(t);let u=p.value?W("todo",v.$route.query.id):G("todo");u.set("title",t.title),u.set("desc",t.desc),u.set("done",!1),u.set("dateTime",t.time?t.date+" "+t.time:t.date),v.$toast.loading("loading",{cover:!0}),u.save().then(i=>{K.hide(),$.success("\u4FDD\u5B58\u6210\u529F"),v.$router.go(-1)}).catch(i=>{$.danger(i)})}else console.log(e)})}function V(o){t.date=o[3]}function Y(o){const e=o.selectedValue;F.value=new Date(g().format("YYYY-MM-DD ")+`${e[0]}:${e[1]}:${e[2]}`),t.time=`${e[0]}:${e[1]}:${e[2]}`}const B=(o,e)=>{const u={year:()=>e.text+="\u5E74",month:()=>e.text+="\u6708",day:()=>e.text+="\u65E5",hour:()=>e.text+="\u65F6",minute:()=>e.text+="\u5206"};return u[o]&&u[o](),e};return(o,e)=>{const u=d("nut-icon"),i=d("nut-form-item"),I=d("nut-button"),M=d("nut-cell"),N=d("nut-form"),S=d("nut-calendar"),w=d("nut-datepicker");return z(),O("div",L,[s("header",null,[s("div",{class:"btn-back",onClick:e[0]||(e[0]=l=>a(y).go(-1))},[n(u,{name:"rect-left",size:"1.1rem"})]),s("div",P,x(p.value?"\u7F16\u8F91\u5F85\u529E":"\u65B0\u589E\u5F85\u529E"),1)]),s("main",null,[n(N,{"model-value":a(t),rules:a(k),ref_key:"ruleForm",ref:C},{default:c(()=>[n(i,{prop:"title",required:""},{default:c(()=>[Q,h(s("input",{class:"nut-input-text","onUpdate:modelValue":e[1]||(e[1]=l=>a(t).title=l),placeholder:"\u8BF7\u8F93\u5165\u6807\u9898",type:"text"},null,512),[[E,a(t).title]])]),_:1}),n(i,{prop:"desc"},{default:c(()=>[X,h(s("input",{class:"nut-input-text","onUpdate:modelValue":e[2]||(e[2]=l=>a(t).desc=l),placeholder:"\u8BF7\u8F93\u5165\u5907\u6CE8",type:"text"},null,512),[[E,a(t).desc]])]),_:1}),n(i,null,{default:c(()=>[Z,s("section",{class:"date",onClick:e[3]||(e[3]=l=>f.value=!0)},[s("div",ee,x(a(t).date),1),te])]),_:1}),n(i,null,{default:c(()=>[se,s("section",{class:"date",onClick:e[4]||(e[4]=l=>b.value=!0)},[s("div",oe,x(a(t).time.slice(0,-3)||"\u9009\u62E9"),1),le])]),_:1}),n(M,{class:"submit-container"},{default:c(()=>[n(I,{type:"primary",disabled:!a(t).title,block:"",color:"rgb(106, 116, 205)",size:"large",onClick:T},{default:c(()=>[ae]),_:1},8,["disabled"])]),_:1})]),_:1},8,["model-value","rules"]),n(S,{visible:f.value,"onUpdate:visible":e[5]||(e[5]=l=>f.value=l),onClose:e[6]||(e[6]=l=>f.value=!1),onChoose:V,"default-value":a(t).date,"start-date":null,"end-date":null,"is-auto-back-fill":!0},null,8,["visible","default-value"]),n(w,{modelValue:F.value,"onUpdate:modelValue":e[7]||(e[7]=l=>F.value=l),title:"\u65F6\u95F4\u9009\u62E9",formatter:B,type:"time",onConfirm:Y,visible:b.value,"onUpdate:visible":e[8]||(e[8]=l=>b.value=l)},null,8,["modelValue","visible"])])])}}});var de=U(ue,[["__scopeId","data-v-4f0ca834"]]);export{de as default};
