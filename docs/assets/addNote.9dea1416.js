import{_ as D,d as F,s as E,a as V,r as p,x as h,G as w,b as n,o as S,c as $,e as u,g as t,f as a,t as H,h as r,B as T,H as z,p as M,m as j,l as q,D as O,I as U,T as A,N as x}from"./index.e36c1f45.js";const G=i=>(M("data-v-5b24ab10"),i=i(),j(),i),J={class:"add-note"},R={class:"header-title"},W=G(()=>u("div",{class:"label"},null,-1)),K=q("\u63D0\u4EA4"),L=F({setup(i){const{proxy:d}=E(),B=V(),c=p(!1),e=h({title:"",detail:""}),v=p(null),C=h({detail:[{message:"\u8BF7\u8F93\u5165\u5907\u6CE8"}]}),m=p({}),g=p(400);w(()=>{g.value=window.innerHeight-320}),d.$route.path==="/schedule/editNote"&&(c.value=!0,m.value=JSON.parse(sessionStorage.getItem("noteEditInfo")),e.title=m.value.title,e.detail=m.value.detail);function y(){v.value.validate().then(({valid:b,errors:o})=>{if(b){let l=c.value?O("note",d.$route.query.objectId):U("note");if(l.set("title",e.title),l.set("detail",e.detail),!c.value){const f=["green","blue","pink","purple","orange"][Math.floor(Math.random()*5)];l.set("bgColor",f)}d.$toast.loading("loading",{cover:!0}),l.save().then(s=>{A.hide(),x.success("\u4FDD\u5B58\u6210\u529F"),d.$router.go(-1)}).catch(s=>{x.danger(s)})}else console.log(o)})}return(b,o)=>{const l=n("nut-icon"),s=n("nut-form-item"),f=n("nut-textarea"),I=n("nut-button"),k=n("nut-cell"),N=n("nut-form");return S(),$("div",J,[u("header",null,[u("div",{class:"btn-back",onClick:o[0]||(o[0]=_=>t(B).go(-1))},[a(l,{name:"rect-left",size:"1.1rem"})]),u("div",R,H(c.value?"\u7F16\u8F91\u7B14\u8BB0":"\u65B0\u589E\u7B14\u8BB0"),1)]),u("main",null,[a(N,{"model-value":t(e),rules:t(C),ref_key:"ruleForm",ref:v},{default:r(()=>[a(s,{prop:"title",required:""},{default:r(()=>[T(u("input",{class:"nut-input-text","onUpdate:modelValue":o[1]||(o[1]=_=>t(e).title=_),placeholder:"\u6807\u9898",type:"text"},null,512),[[z,t(e).title]])]),_:1}),a(s,{prop:"detail"},{default:r(()=>[W,a(f,{modelValue:t(e).detail,"onUpdate:modelValue":o[2]||(o[2]=_=>t(e).detail=_),placeholder:"\u5185\u5BB9\u2026\u2026",rows:"10",autosize:{maxHeight:g.value,minHeight:100}},null,8,["modelValue","autosize"])]),_:1}),a(k,{class:"submit-container"},{default:r(()=>[a(I,{type:"primary",disabled:!t(e).title&&!t(e).detail,block:"",color:"rgb(106, 116, 205)",size:"large",onClick:y},{default:r(()=>[K]),_:1},8,["disabled"])]),_:1})]),_:1},8,["model-value","rules"])])])}}});var Q=D(L,[["__scopeId","data-v-5b24ab10"]]);export{Q as default};
