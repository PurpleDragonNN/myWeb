import{_ as U,d as j,s as q,a as z,r as _,x as D,b as d,o as H,c as J,e as s,g as a,f as n,t as x,h as r,B as $,I as h,p as O,m as A,l as R,D as W,J as G,N as E}from"./index.032ffb9f.js";import{a as C}from"./dayjs.min.5eb3d7e5.js";const c=v=>(O("data-v-3155f08c"),v=v(),A(),v),K={class:"add-todo"},L={class:"header-title"},P=c(()=>s("div",{class:"label"},"\u6807\u9898",-1)),Q=c(()=>s("div",{class:"label"},"\u5907\u6CE8",-1)),X=c(()=>s("div",{class:"label"},"\u65E5\u671F",-1)),Z={class:"label"},ee=c(()=>s("i",{class:"iconfont icon-rili"},null,-1)),te=c(()=>s("div",{class:"label"},"\u65F6\u95F4",-1)),se={class:"label"},oe=c(()=>s("i",{class:"iconfont icon-shijian"},null,-1)),le=R("\u63D0\u4EA4"),ae=j({setup(v){const{proxy:m}=q(),y=z(),p=_(!1),t=D({title:"",desc:"",date:C().format("YYYY-MM-DD"),time:""}),g=_(null),k=D({desc:[{message:"\u8BF7\u8F93\u5165\u5907\u6CE8"}]}),f=_(!1),b=_(!1),F=_(new Date(C().format("YYYY-MM-DD HH:mm:00")));if(m.$route.path==="/schedule/editTodo"){p.value=!0;const o=JSON.parse(sessionStorage.getItem("todoEditInfo"));t.title=o.title,t.desc=o.desc,t.date=o.dateTime.split(" ")[0],t.time=o.dateTime.split(" ")[1]||""}function V(){g.value.validate().then(({valid:o,errors:e})=>{if(o){console.log(t);let u=p.value?W("todo",m.$route.query.id):G("todo");u.set("title",t.title),u.set("desc",t.desc),u.set("done",!1),u.set("dateTime",t.time?t.date+" "+t.time:t.date),m.$toast.loading("loading",{cover:!0,duration:0}),u.save().then(i=>{m.$toast.hide(),E.success("\u4FDD\u5B58\u6210\u529F"),m.$router.go(-1)}).catch(i=>{E.danger(i)})}else console.log(e)})}function Y(o){t.date=o[3]}function T(o){const e=o.selectedValue;F.value=new Date(C().format("YYYY-MM-DD ")+`${e[0]}:${e[1]}:${e[2]}`),t.time=`${e[0]}:${e[1]}:${e[2]}`}const B=(o,e)=>{const u={year:()=>e.text+="\u5E74",month:()=>e.text+="\u6708",day:()=>e.text+="\u65E5",hour:()=>e.text+="\u65F6",minute:()=>e.text+="\u5206"};return u[o]&&u[o](),e};return(o,e)=>{const u=d("nut-icon"),i=d("nut-form-item"),I=d("nut-button"),M=d("nut-cell"),N=d("nut-form"),S=d("nut-calendar"),w=d("nut-datepicker");return H(),J("div",K,[s("header",null,[s("div",{class:"btn-back",onClick:e[0]||(e[0]=l=>a(y).go(-1))},[n(u,{name:"rect-left",size:"1.1rem"})]),s("div",L,x(p.value?"\u7F16\u8F91\u5F85\u529E":"\u65B0\u589E\u5F85\u529E"),1)]),s("main",null,[n(N,{"model-value":a(t),rules:a(k),ref_key:"ruleForm",ref:g},{default:r(()=>[n(i,{prop:"title",required:""},{default:r(()=>[P,$(s("input",{class:"nut-input-text","onUpdate:modelValue":e[1]||(e[1]=l=>a(t).title=l),placeholder:"\u8BF7\u8F93\u5165\u6807\u9898",type:"text"},null,512),[[h,a(t).title]])]),_:1}),n(i,{prop:"desc"},{default:r(()=>[Q,$(s("input",{class:"nut-input-text","onUpdate:modelValue":e[2]||(e[2]=l=>a(t).desc=l),placeholder:"\u8BF7\u8F93\u5165\u5907\u6CE8",type:"text"},null,512),[[h,a(t).desc]])]),_:1}),n(i,null,{default:r(()=>[X,s("section",{class:"date",onClick:e[3]||(e[3]=l=>f.value=!0)},[s("div",Z,x(a(t).date),1),ee])]),_:1}),n(i,null,{default:r(()=>[te,s("section",{class:"date",onClick:e[4]||(e[4]=l=>b.value=!0)},[s("div",se,x(a(t).time.slice(0,-3)||"\u9009\u62E9"),1),oe])]),_:1}),n(M,{class:"submit-container"},{default:r(()=>[n(I,{type:"primary",disabled:!a(t).title,block:"",color:"rgb(106, 116, 205)",size:"large",onClick:V},{default:r(()=>[le]),_:1},8,["disabled"])]),_:1})]),_:1},8,["model-value","rules"]),n(S,{visible:f.value,"onUpdate:visible":e[5]||(e[5]=l=>f.value=l),onClose:e[6]||(e[6]=l=>f.value=!1),onChoose:Y,"default-value":a(t).date,"start-date":null,"end-date":null,"is-auto-back-fill":!0},null,8,["visible","default-value"]),n(w,{modelValue:F.value,"onUpdate:modelValue":e[7]||(e[7]=l=>F.value=l),title:"\u65F6\u95F4\u9009\u62E9",formatter:B,type:"time",onConfirm:T,visible:b.value,"onUpdate:visible":e[8]||(e[8]=l=>b.value=l)},null,8,["modelValue","visible"])])])}}});var ie=U(ae,[["__scopeId","data-v-3155f08c"]]);export{ie as default};
