import{_ as D,d as F,s as E,a as V,r as p,x as b,G as $,b as n,o as w,c as S,e as u,g as t,f as a,t as z,h as i,B as H,I as M,p as T,m as j,l as q,D as J,J as O,N as x}from"./index.032ffb9f.js";const U=d=>(T("data-v-c0e5d18e"),d=d(),j(),d),A={class:"add-note"},G={class:"header-title"},R=U(()=>u("div",{class:"label"},null,-1)),W=q("\u63D0\u4EA4"),K=F({setup(d){const{proxy:r}=E(),B=V(),c=p(!1),e=b({title:"",detail:""}),v=p(null),C=b({detail:[{message:"\u8BF7\u8F93\u5165\u5907\u6CE8"}]}),m=p({}),g=p(400);$(()=>{g.value=window.innerHeight-320}),r.$route.path==="/schedule/editNote"&&(c.value=!0,m.value=JSON.parse(sessionStorage.getItem("noteEditInfo")),e.title=m.value.title,e.detail=m.value.detail);function y(){v.value.validate().then(({valid:h,errors:o})=>{if(h){let l=c.value?J("note",r.$route.query.objectId):O("note");if(l.set("title",e.title),l.set("detail",e.detail),!c.value){const f=["green","blue","pink","purple","orange"][Math.floor(Math.random()*5)];l.set("bgColor",f)}r.$toast.loading("loading",{cover:!0,duration:0}),l.save().then(s=>{r.$toast.hide(),x.success("\u4FDD\u5B58\u6210\u529F"),r.$router.go(-1)}).catch(s=>{x.danger(s)})}else console.log(o)})}return(h,o)=>{const l=n("nut-icon"),s=n("nut-form-item"),f=n("nut-textarea"),I=n("nut-button"),k=n("nut-cell"),N=n("nut-form");return w(),S("div",A,[u("header",null,[u("div",{class:"btn-back",onClick:o[0]||(o[0]=_=>t(B).go(-1))},[a(l,{name:"rect-left",size:"1.1rem"})]),u("div",G,z(c.value?"\u7F16\u8F91\u7B14\u8BB0":"\u65B0\u589E\u7B14\u8BB0"),1)]),u("main",null,[a(N,{"model-value":t(e),rules:t(C),ref_key:"ruleForm",ref:v},{default:i(()=>[a(s,{prop:"title",required:""},{default:i(()=>[H(u("input",{class:"nut-input-text","onUpdate:modelValue":o[1]||(o[1]=_=>t(e).title=_),placeholder:"\u6807\u9898",type:"text"},null,512),[[M,t(e).title]])]),_:1}),a(s,{prop:"detail"},{default:i(()=>[R,a(f,{modelValue:t(e).detail,"onUpdate:modelValue":o[2]||(o[2]=_=>t(e).detail=_),placeholder:"\u5185\u5BB9\u2026\u2026",rows:"10",autosize:{maxHeight:g.value,minHeight:100}},null,8,["modelValue","autosize"])]),_:1}),a(k,{class:"submit-container"},{default:i(()=>[a(I,{type:"primary",disabled:!t(e).title&&!t(e).detail,block:"",color:"rgb(106, 116, 205)",size:"large",onClick:y},{default:i(()=>[W]),_:1},8,["disabled"])]),_:1})]),_:1},8,["model-value","rules"])])])}}});var P=D(K,[["__scopeId","data-v-c0e5d18e"]]);export{P as default};
