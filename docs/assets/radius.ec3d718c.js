import{_ as L,d as N,r,b as m,o as b,c as T,f as g,h as B,e as p,g as i,t as S,k as I,i as z}from"./index.45a74e34.js";const A={class:"container"},H={class:"show"},M=["href"],P=["src"],j={key:1},y=["src"],G=N({__name:"radius",setup(J){let F=r(""),w=r(""),k=r(""),V=r(window.navigator.userAgent.toLowerCase().match(/MicroMessenger/i)=="micromessenger"),f=r(50),D=r([]),R=r(null),C=r(null),U=r(null);function q({fileItem:d}){D.value[0].status="success",F.value=d.url,setTimeout(()=>{let e=W({img:C.value,type:1,radius:f.value*(C.value.naturalWidth/750)});w.value=e,k.value=e},500)}function W(d){let e=d.img,h=d.type||0,E=d.radius||0,t,s,n;if(h?t={width:e.naturalWidth,height:e.naturalHeight}:t={width:e.width,height:e.height},s=document.createElement("canvas"),!s.getContext)return console.log("\u60A8\u7684\u6D4F\u89C8\u5668\u7248\u672C\u8FC7\u4F4E\uFF0C\u6682\u4E0D\u652F\u6301\u3002"),!1;s.width=t.width,s.height=t.height,n=s.getContext("2d"),n.clearRect(0,0,t.width,t.height),n.save(),n.beginPath(),v(n,0,0,t.width,t.height,E),n.clip(),h?n.drawImage(e,0,0,t.width,t.height,0,0,t.width,t.height):n.drawImage(e,0,0,e.naturalWidth,e.naturalHeight,0,0,t.width,t.height),n.restore();function v(a,u,l,_,c,o){a.strokeStyle="#fff",a.beginPath(),a.moveTo(u,l+o),a.lineTo(u,l+c-o),a.quadraticCurveTo(u,l+c,u+o,l+c),a.lineTo(u+_-o,l+c),a.quadraticCurveTo(u+_,l+c,u+_,l+c-o),a.lineTo(u+_,l+o),a.quadraticCurveTo(u+_,l,u+_-o,l),a.lineTo(u+o,l),a.quadraticCurveTo(u,l,u,l+o),a.stroke()}return s.toDataURL("image/png")}return(d,e)=>{const h=m("nut-uploader"),E=m("nut-col"),t=m("nut-input-number"),s=m("nut-row"),n=m("nut-divider");return b(),T("div",A,[g(s,null,{default:B(()=>[g(E,{span:12},{default:B(()=>[g(h,{onFailure:q,"file-list":i(D),ref_key:"uploaderEl",ref:U,class:"upload-btn"},null,8,["file-list"])]),_:1}),g(t,{modelValue:i(f),"onUpdate:modelValue":e[0]||(e[0]=v=>z(f)?f.value=v:f=v),"button-size":"30","input-width":"50"},null,8,["modelValue"])]),_:1}),g(n),p("div",H,[i(w)?(b(),T("a",{key:0,href:i(k),download:"\u56FE\u7247",class:"download-btn"},[p("p",null,"\u8F6C\u6362\u540E\uFF08"+S(i(V)?"\u957F\u6309\u56FE\u7247\u4FDD\u5B58":"\u70B9\u51FB\u4E0B\u8F7D")+"\uFF09:",1),p("img",{ref_key:"afterImgEl",ref:R,src:i(w),alt:"",class:"after-transform"},null,8,P)],8,M)):I("",!0),i(F)?(b(),T("div",j,[e[1]||(e[1]=p("p",null,"\u8F6C\u6362\u524D:",-1)),p("img",{ref_key:"beforeImgEl",ref:C,src:i(F),alt:"",class:"before-transform"},null,8,y)])):I("",!0)])])}}});var O=L(G,[["__scopeId","data-v-45505f8c"]]);export{O as default};
